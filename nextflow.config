// nextflow.config
// Configuration file for BaseSpace to GCS transfer workflow

process {
    // Default container for all processes
    container = 'us-central1-docker.pkg.dev/asu-ap-gap-data-opstest-18c2/bs-gcs2/client:latest'
    
    // Error handling
    errorStrategy = 'terminate'
    
    // Resource limits (adjust based on your compute environment)
    cpus = 2
    memory = '4 GB'
    time = '2h'
    
    // Enable retry for transient failures
    maxRetries = 2
    
    // Publish results
    publishDir = [
        path: { "${params.outdir}/results" },
        mode: 'copy'
    ]
}

// Workflow parameters
params {
    // Secret Manager configuration
    basespace_secret_name = 'basespace-api-key'
    gcp_project = 'asu-ap-gap-data-opstest-18c2'
    
    // Output directory
    outdir = './results'
    
    // Optional: Override container if needed
    // container = 'us-central1-docker.pkg.dev/asu-ap-gap-data-opstest-18c2/bs-gcs2/client:latest'
}

// Execution configuration
executor {
    // Default executor (will be overridden by Seqera compute environment)
    name = 'local'
}

// Logging
log {
    level = 'info'
}

// Workflow configuration
workflow {
    // Enable resume functionality
    resume = true
}

